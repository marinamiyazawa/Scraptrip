<div class="container">
	<div class="row">
		<div class="col-xs-12">
			<div class="row" style="margin-bottom: 50px;">
				<div class="col-xs-8">
					<%= attachment_image_tag @vision_image, :image, class: "vision-img" %>
				</div>
				<div class="col-xs-4">
					<div class="label-box">
						<span class="label-box-title">ラベル検出</span>
						<% @vision_image.tags.each do |tag| %>
							<div class="row">
								<div class="col-xs-4">
									<div class="label label-primary"><%= tag.name %></div>
								</div>
								<div class="col-xs-4">
									<div class="label label-primary">
										<% tag_score = tag.score.round(3) * 100 %>
										<%= tag_score %>%</div>
								</div>
							</div>
						<% end %>
					</div>
					<div class="landmark-box">
						<span class="landmark-box-title">ランドマーク検出</span>
						<% @vision_image.landmarks.each do |landmark| %>
							<div class="row">
								<div class="label label-warning"><%= landmark.name %></div>
							</div>
							<div class="row">
								<div id="map" style="width: 90%; height: 300px;"></div>
								<script>
								  handler = Gmaps.build('Google');
								  handler.buildMap({
								    provider: {mapTypeId: 'roadmap'},
								    internal: {id: 'map'}
								    },
								    function(){
								    //markers = handler.addMarkers(#{raw @hash.to_json})
								    markers = handler.addMarkers(<%=raw @hash.to_json %>)
								    handler.bounds.extendWith(markers);
								    handler.fitMapToBounds();
								    handler.getMap().setCenter(new google.maps.LatLng(35.681298, 139.7640582));
								    handler.getMap().setZoom(1);
								  });
								</script>
							</div>
						<% end %>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<%= link_to 'もう一度画像検索する', new_vision_image_path, class: "btn btn-primary pull-right" %>
		</div>
	</div>
</div>